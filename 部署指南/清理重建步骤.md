# å®Œå…¨æ¸…ç†å’Œé‡å»ºæ­¥éª¤

## ğŸ—‘ï¸ ç¬¬ä¸€æ­¥ï¼šåœæ­¢å¹¶åˆ é™¤æ‰€æœ‰å®¹å™¨

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /www/wwwroot/TheProjectSan
# æˆ–ä½ çš„é¡¹ç›®ç›®å½•

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker compose down

# å¼ºåˆ¶åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼ˆå¦‚æœè¿˜æœ‰æ®‹ç•™ï¼‰
docker compose rm -f
```

## ğŸ—‘ï¸ ç¬¬äºŒæ­¥ï¼šåˆ é™¤æ‰€æœ‰ç›¸å…³é•œåƒ

```bash
# æŸ¥çœ‹æ‰€æœ‰ç›¸å…³é•œåƒ
docker images | grep -E "theprojectsan|frontend|backend|caddy"

# åˆ é™¤é¡¹ç›®ç›¸å…³çš„é•œåƒ
docker rmi theprojectsan-frontend theprojectsan-backend 2>/dev/null || true

# æˆ–è€…åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒï¼ˆå¯é€‰ï¼Œè°¨æ…ä½¿ç”¨ï¼‰
# docker image prune -a
```

## ğŸ—‘ï¸ ç¬¬ä¸‰æ­¥ï¼šæ¸…ç†æ„å»ºç¼“å­˜ï¼ˆå¯é€‰ä½†æ¨èï¼‰

```bash
# æ¸…ç†Dockeræ„å»ºç¼“å­˜
docker builder prune -f

# æ¸…ç†æœªä½¿ç”¨çš„å®¹å™¨ã€ç½‘ç»œã€é•œåƒ
docker system prune -f
```

## âœ… ç¬¬å››æ­¥ï¼šéªŒè¯æ¸…ç†ç»“æœ

```bash
# æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ç›¸å…³å®¹å™¨
docker ps -a | grep theproject

# æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ç›¸å…³é•œåƒ
docker images | grep theproject

# åº”è¯¥éƒ½æ˜¯ç©ºçš„
```

## ğŸ”¨ ç¬¬äº”æ­¥ï¼šé‡æ–°æ„å»ºæ‰€æœ‰é•œåƒ

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
cd /www/wwwroot/TheProjectSan

# é‡æ–°æ„å»ºæ‰€æœ‰æœåŠ¡ï¼ˆä¸ä½¿ç”¨ç¼“å­˜ï¼‰
docker compose build --no-cache

# æˆ–è€…åˆ†åˆ«æ„å»º
docker compose build --no-cache backend
docker compose build --no-cache frontend
```

## ğŸš€ ç¬¬å…­æ­¥ï¼šå¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker compose ps

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f
```

## âœ… ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥åç«¯å¥åº·çŠ¶æ€
curl http://localhost:12393/health

# æ£€æŸ¥å‰ç«¯å®¹å™¨å†…çš„æ–‡ä»¶
docker compose exec frontend ls -la /usr/share/nginx/html/

# åº”è¯¥çœ‹åˆ° index.html å’Œ assets ç›®å½•
```

---

## ğŸš¨ å¦‚æœé‡åˆ°é—®é¢˜

### é—®é¢˜1ï¼šç«¯å£è¢«å ç”¨

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tulpn | grep -E ":(80|443|12393|3000)"

# å¦‚æœè¢«å ç”¨ï¼Œåœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡
```

### é—®é¢˜2ï¼šæƒé™é—®é¢˜

```bash
# ç¡®ä¿æœ‰Dockeræƒé™
sudo systemctl start docker
sudo usermod -aG docker $USER
newgrp docker
```

### é—®é¢˜3ï¼šæ–‡ä»¶ä¸å­˜åœ¨

```bash
# æ£€æŸ¥å¿…éœ€æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la Dockerfile docker-compose.yml Caddyfile .env
ls -la frontend/Dockerfile.frontend frontend/nginx.conf
```

---

## ğŸ“ å¿«é€Ÿä¸€é”®æ¸…ç†é‡å»ºè„šæœ¬

```bash
#!/bin/bash
# å®Œå…¨æ¸…ç†å’Œé‡å»ºè„šæœ¬

cd /www/wwwroot/TheProjectSan

echo "ğŸ›‘ åœæ­¢æ‰€æœ‰æœåŠ¡..."
docker compose down

echo "ğŸ—‘ï¸ åˆ é™¤æ‰€æœ‰å®¹å™¨..."
docker compose rm -f

echo "ğŸ—‘ï¸ åˆ é™¤é¡¹ç›®é•œåƒ..."
docker rmi theprojectsan-frontend theprojectsan-backend 2>/dev/null || true

echo "ğŸ§¹ æ¸…ç†æ„å»ºç¼“å­˜..."
docker builder prune -f

echo "ğŸ”¨ é‡æ–°æ„å»º..."
docker compose build --no-cache

echo "ğŸš€ å¯åŠ¨æœåŠ¡..."
docker compose up -d

echo "âœ… æŸ¥çœ‹çŠ¶æ€..."
docker compose ps

echo "ğŸ“‹ æŸ¥çœ‹æ—¥å¿—ï¼ˆæŒ‰Ctrl+Cé€€å‡ºï¼‰..."
docker compose logs -f
```

ä¿å­˜ä¸º `rebuild.sh`ï¼Œç„¶åæ‰§è¡Œï¼š
```bash
chmod +x rebuild.sh
./rebuild.sh
```

